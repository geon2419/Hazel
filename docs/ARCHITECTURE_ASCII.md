# Hazel Game Engine - Architecture (ASCII Diagram)

## 전체 프로젝트 구조

```
┌─────────────────────────────────────────────────────────────────┐
│                         Hazel Project                            │
└─────────────────────────────────────────────────────────────────┘
                              │
                ┌─────────────┴─────────────┐
                │                           │
        ┌───────▼────────┐         ┌───────▼────────┐
        │  Hazel Engine  │         │    Sandbox     │
        │  (SharedLib)   │◄────────│  (ConsoleApp)  │
        └───────┬────────┘         └────────────────┘
                │
                │ Uses
                │
    ┌───────────┼───────────┬──────────────┐
    │           │           │              │
┌───▼───┐  ┌───▼───┐  ┌────▼────┐   ┌────▼────┐
│ GLFW  │  │ Glad  │  │  ImGui  │   │   glm   │
│(Window│  │(OpenGL│  │  (GUI)  │   │ (Math)  │
│ Mgmt) │  │Loader)│  │         │   │         │
└───────┘  └───────┘  └─────────┘   └─────────┘
                │
                │ Binds to
                ▼
        ┌──────────────┐
        │   OpenGL     │
        │  (Graphics)  │
        └──────────────┘
```

## Hazel 엔진 내부 아키텍처

```
┌──────────────────────────────────────────────────────────────────┐
│                        Hazel Engine Core                          │
├──────────────────────────────────────────────────────────────────┤
│                                                                   │
│  ┌────────────────┐                  ┌──────────────────┐        │
│  │  EntryPoint.h  │──────────────────►   Application    │        │
│  │ (Entry Macro)  │  Creates & Runs  │   (Main Loop)    │        │
│  └────────────────┘                  └─────────┬────────┘        │
│                                                 │                 │
│                          ┌──────────────────────┼──────────┐      │
│                          │                      │          │      │
│                    ┌─────▼──────┐      ┌────────▼────┐  ┌─▼────┐ │
│                    │ LayerStack │      │   Window    │  │ Log  │ │
│                    │  (Layers)  │      │ (Abstract)  │  │(spdlog)│
│                    └─────┬──────┘      └────────┬────┘  └──────┘ │
│                          │                      │                 │
│                  ┌───────┴───────┐              │                 │
│                  │               │              │                 │
│            ┌─────▼─────┐  ┌──────▼──────┐      │                 │
│            │   Layer   │  │ ImGuiLayer  │      │                 │
│            │ (Base)    │  │    (GUI)    │      │                 │
│            └───────────┘  └─────────────┘      │                 │
│                                                 │                 │
├─────────────────────────────────────────────────┼─────────────────┤
│                    Event System                 │                 │
├─────────────────────────────────────────────────┘                 │
│                                                                   │
│  ┌──────────┐     ┌─────────────┐     ┌──────────────┐          │
│  │  Event   │◄────┤WindowEvent  │     │ KeyEvent     │          │
│  │ (Base)   │     │(Close,Resize)     │ (Key Press)  │          │
│  └────▲─────┘     └─────────────┘     └──────────────┘          │
│       │                                                           │
│       └────────┬─────────────────┐                               │
│                │                 │                               │
│       ┌────────▼───────┐  ┌──────▼──────┐                       │
│       │  MouseEvent    │  │ApplicationEv│                       │
│       │(Click,Move,    │  │(Tick,Update,│                       │
│       │ Scroll)        │  │ Render)     │                       │
│       └────────────────┘  └─────────────┘                       │
│                                                                   │
├──────────────────────────────────────────────────────────────────┤
│                    Platform Layer                                │
├──────────────────────────────────────────────────────────────────┤
│                                                                   │
│  ┌────────────────┐                 ┌─────────────────┐          │
│  │ WindowsWindow  │  implements     │     Input       │          │
│  │  (GLFW impl)   │◄────────────────┤   (Abstract)    │          │
│  └────────────────┘                 └────────▲────────┘          │
│                                              │                    │
│                                   ┌──────────┴──────────┐         │
│                                   │                     │         │
│                            ┌──────▼───────┐  ┌─────────▼────┐   │
│                            │WindowsInput  │  │  KeyCodes    │   │
│                            │(Input Poll)  │  │MouseBtnCodes │   │
│                            └──────────────┘  └──────────────┘   │
│                                                                   │
└──────────────────────────────────────────────────────────────────┘
```

## 데이터 흐름

```
    ┌──────────┐
    │ OS Event │
    └─────┬────┘
          │
          ▼
    ┌──────────────┐         ┌──────────────┐
    │ GLFW Callback│────────►│ Hazel Event  │
    │              │  Creates│   Object     │
    └──────────────┘         └──────┬───────┘
                                    │
                                    │ Dispatches
                                    ▼
                            ┌────────────────┐
                            │  Application   │
                            │  OnEvent()     │
                            └────────┬───────┘
                                    │
                                    │ Propagates
                                    ▼
                            ┌────────────────┐
                            │  LayerStack    │
                            │ (Reverse order)│
                            └────────┬───────┘
                                    │
                        ┌───────────┼───────────┐
                        │           │           │
                    ┌───▼───┐   ┌───▼───┐   ┌──▼────┐
                    │Layer 1│   │Layer 2│   │Layer N│
                    │OnEvent│   │OnEvent│   │OnEvent│
                    └───────┘   └───────┘   └───────┘
```

## 렌더링 흐름

```
    ┌──────────────┐
    │ Application  │
    │   Run()      │
    └──────┬───────┘
           │ Game Loop
           │
    ┌──────▼────────────────────────────┐
    │  while (!window->ShouldClose())   │
    │  {                                │
    │    ┌──────────────────────┐      │
    │    │ For Each Layer:      │      │
    │    │   layer->OnUpdate()  │      │
    │    └──────────┬───────────┘      │
    │               │                   │
    │    ┌──────────▼───────────┐      │
    │    │ ImGui Rendering:     │      │
    │    │   Begin()            │      │
    │    │   For Each Layer:    │      │
    │    │     layer->OnImGui() │      │
    │    │   End()              │      │
    │    └──────────┬───────────┘      │
    │               │                   │
    │    ┌──────────▼───────────┐      │
    │    │ window->OnUpdate()   │      │
    │    │   (Swap buffers,     │      │
    │    │    Poll events)      │      │
    │    └──────────────────────┘      │
    │  }                                │
    └───────────────────────────────────┘
```

## 빌드 시스템

```
┌──────────────────┐
│  premake5.lua    │  Build Configuration
└────────┬─────────┘
         │
         │ Generates
         ▼
┌──────────────────┐
│ Visual Studio    │
│ Solution Files   │  (.sln, .vcxproj)
└────────┬─────────┘
         │
         │ Builds
         ▼
┌──────────────────┬──────────────────┐
│  Hazel.dll       │   Sandbox.exe    │
│  (Engine Lib)    │   (Test App)     │
└──────────────────┴──────────────────┘
         │                   │
         └─────────┬─────────┘
                   │
                   ▼
         ┌──────────────────┐
         │  bin/[Config]/   │
         │  [ProjectName]/  │
         └──────────────────┘
```

## 의존성 그래프

```
                    Sandbox Application
                           │
                           │ Links to
                           ▼
                    ┌──────────────┐
                    │ Hazel Engine │
                    └──────┬───────┘
                           │
         ┌─────────────────┼─────────────────┬──────────┐
         │                 │                 │          │
    ┌────▼────┐      ┌─────▼─────┐    ┌─────▼─────┐  ┌▼──┐
    │  GLFW   │      │   Glad    │    │  ImGui    │  │glm│
    │         │      │           │    │           │  │   │
    └────┬────┘      └─────┬─────┘    └───────────┘  └───┘
         │                 │
         └────────┬────────┘
                  │
                  ▼
            ┌──────────┐
            │ OpenGL   │
            │ (System) │
            └──────────┘
```

## 주요 컴포넌트 설명

### Core Components
- **Application**: 엔진의 핵심 클래스, 메인 루프 관리
- **EntryPoint**: 플랫폼별 엔트리 포인트 제공 (main 함수)
- **Window**: 플랫폼 독립적인 윈도우 인터페이스
- **Log**: spdlog 기반 로깅 시스템

### Layer System
- **Layer**: 게임 로직을 계층화하여 관리
- **LayerStack**: 레이어들의 스택 관리, 이벤트 전파
- **ImGuiLayer**: 디버그 UI 레이어

### Event System
- **Event**: 이벤트 베이스 클래스
- **ApplicationEvent**: 앱 라이프사이클 이벤트
- **KeyEvent**: 키보드 입력 이벤트
- **MouseEvent**: 마우스 입력 이벤트
- **WindowEvent**: 윈도우 이벤트 (리사이즈, 종료 등)

### Platform Layer
- **WindowsWindow**: Windows용 GLFW 윈도우 구현
- **WindowsInput**: Windows용 입력 폴링 구현
- **Input**: 플랫폼 독립적인 입력 인터페이스

### External Dependencies
- **GLFW**: 크로스플랫폼 윈도우 및 입력 관리
- **Glad**: OpenGL 함수 로더
- **ImGui**: 즉시모드 GUI 라이브러리
- **glm**: OpenGL Mathematics 라이브러리
- **spdlog**: 빠른 C++ 로깅 라이브러리
